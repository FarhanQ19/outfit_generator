<!DOCTYPE html>
<html>
<head>
    <title>Outfit Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
        }
        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
            width: 100%;
        }
        header h1 {
            text-transform: uppercase;
            margin: 0;
            font-size: 24px;
        }
        form {
            background: #fff;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 0 10px #ccc;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        form select,
        form input[type="file"] {
            margin-bottom: 10px;
            padding: 10px;
            font-size: 16px;
            width: 100%;
            max-width: 300px;
        }
        form input[type="submit"] {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #333;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        .outfits {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
        }
        .outfit {
            background: #fff;
            padding: 10px;
            box-shadow: 0 0 10px #ccc;
            text-align: center;
        }
        .outfit img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <header>
        <h1>Outfit Generator</h1>
    </header>
    <div class="container">
        <form id="uploadForm" action="/upload" method="post" enctype="multipart/form-data">
            <select id="category" name="category" required>
                <option value="">Select Category</option>
                <option value="1">Tops</option>
                <option value="2">Bottoms</option>
                <option value="3">Shoes</option>
                <option value="4">Hats</option>
                <option value="5">Bags</option>
                <option value="6">Accessories</option>
                <!-- Add more categories as needed -->
            </select>
            <select id="name" name="name" required>
                <option value="">Select Name</option>
            </select>
            <select id="brand" name="brand" required>
                <option value="">Select Brand</option>
            </select>
            <select id="color" name="color" required>
                <option value="">Select Color</option>
            </select>
            <select id="secondaryColor" name="secondaryColor">
                <option value="">No Secondary Color</option>
                <!-- Options for secondary color will be populated dynamically -->
            </select>
            <select id="style" name="style" required>
                <option value="">Select Style</option>
            </select>
            <select id="season" name="season" required>
                <option value="">Select Season</option>
                <option value="Summer">Summer</option>
                <option value="Winter">Winter</option>
                <option value="Spring">Spring</option>
                <option value="Fall">Fall</option>
                <option value="All">All</option>
            </select>
            <input type="file" name="photo" required>
            <input type="submit" value="Upload">
        </form>
        <div id="outfits" class="outfits"></div>
    </div>

    <script>
        const categoryToNames = {
            1: ["T-Shirt", "Long Sleeve", "Blouse", "Tank Top"],
            2: ["Shorts", "Pants", "Skirt", "Jeans"],
            3: ["Sneakers", "Boots", "Sandals", "Loafers"],
            4: ["Cap", "Beanie", "Fedora", "Hat"],
            5: ["Handbag", "Backpack", "Tote", "Clutch"],
            6: ["Watch", "Necklace", "Bracelet", "Earrings"]
            // Add more categories and corresponding names as needed
        };

        const categoryToBrands = {
            1: ["H&M", "Zara", "Uniqlo", "Nike"],
            2: ["Levi's", "Gap", "Adidas", "Under Armour"],
            3: ["Nike", "Adidas", "Puma", "Reebok"],
            4: ["New Era", "Nike", "Adidas", "Puma"],
            5: ["Gucci", "Prada", "Louis Vuitton", "Chanel"],
            6: ["Rolex", "Tiffany", "Cartier", "Pandora"]
            // Add more categories and corresponding brands as needed
        };

        const colors = ["Red", "Blue", "Green", "Black", "White", "Yellow", "Pink", "Purple", "Orange", "Brown", "Gray"];
        const styles = ["Casual", "Formal", "Sport", "Party", "Business"];

        document.getElementById('category').addEventListener('change', function() {
            const categoryId = this.value;
            updateOptions('name', categoryToNames[categoryId] || []);
            updateOptions('brand', categoryToBrands[categoryId] || []);
        });

        function updateOptions(selectId, options) {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">Select ' + selectId.charAt(0).toUpperCase() + selectId.slice(1) + '</option>';
            options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option;
                opt.innerHTML = option;
                select.appendChild(opt);
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            updateOptions('color', colors);
            updateOptions('secondaryColor', colors.concat(['No Secondary Color']));
            updateOptions('style', styles);
            fetchOutfits();
        });

        document.getElementById('uploadForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const formData = new FormData(this);
            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.image_url) {
                    alert('Image uploaded successfully!');
                    fetchOutfits();
                } else {
                    alert('Failed to upload image.');
                }
            });
        });

        function fetchOutfits() {
            fetch('/outfits')
                .then(response => response.json())
                .then(data => {
                    const outfitsDiv = document.getElementById('outfits');
                    outfitsDiv.innerHTML = '';
                    data.forEach(item => {
                        const div = document.createElement('div');
                        div.className = 'outfit';
                        const img = document.createElement('img');
                        img.src = item.image_url;
                        img.alt = item.name;
                        div.appendChild(img);
                        const text = document.createElement('p');
                        text.textContent = `${item.name} - ${item.color} - ${item.secondary_color || 'No Secondary Color'} - ${item.brand}`;
                        div.appendChild(text);
                        outfitsDiv.appendChild(div);
                    });
                });
        }
    </script>
</body>
</html>
