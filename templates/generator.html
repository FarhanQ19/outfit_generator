<!DOCTYPE html>
<html>
<head>
    <title>Outfit Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background: #333;
            color: #fff;
            padding: 20px;
            text-align: center;
            width: 100%;
            position: relative;
        }
        header h1 {
            text-transform: uppercase;
            margin: 0;
            font-size: 24px;
        }
        .nav-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        .nav-buttons a {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #fff;
            color: #333;
            text-decoration: none;
            border-radius: 5px;
            border: 1px solid #333;
        }
        .outfit-display {
            position: relative;
            width: 200px;  /* Adjust width as needed */
            height: 600px; /* Adjust height as needed */
            margin-bottom: 20px;
        }
        .outfit-display img {
            position: absolute;
            left: 0;
            width: 100%;
            height: auto;
        }
        .top {
            top: 0;
        }
        .jacket {
            top: 100px; /* Adjust based on the height of the top image */
        }
        .bottom {
            top: 250px; /* Adjust based on the height of the jacket image */
        }
        .shoes {
            top: 400px; /* Adjust based on the height of the bottom image */
        }
        .hat {
            top: -50px; /* Adjust based on desired position */
        }
        .bag-display img {
            position: absolute;
            top: 100px; /* Adjust position as needed */
            right: -50px; /* Adjust position as needed */
            width: 100px; /* Adjust size as needed */
            height: auto;
        }
        .accessory {
            top: 350px; /* Adjust based on desired position */
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #333;
            color: #fff;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <h1>Outfit Generator</h1>
        <div class="nav-buttons">
            <a href="/">Back to Main Page</a>
        </div>
    </header>
    <div class="container">
        <div class="outfit-display" id="outfitDisplay">
            <!-- Images will be placed here by JavaScript -->
        </div>
        <button onclick="randomizeOutfit()">Randomize</button>
    </div>

    <script>
        const outfits = [];

        fetch('/outfits')
            .then(response => response.json())
            .then(data => {
                outfits.push(...data);
                console.log('Fetched outfits:', outfits);
                randomizeOutfit(); // Initial outfit display
            });

        function randomizeOutfit() {
            const outfitDisplay = document.getElementById('outfitDisplay');
            outfitDisplay.innerHTML = '';

            const season = 'Summer'; // Example rule: only summer outfits
            const tops = outfits.filter(item => item.category === 1);
            const bottoms = outfits.filter(item => item.category === 2);
            const shoes = outfits.filter(item => item.category === 3);
            const hats = outfits.filter(item => item.category === 4);
            const bags = outfits.filter(item => item.category === 5);
            const accessories = outfits.filter(item => item.category === 6);
            const jackets = outfits.filter(item => item.category === 7);

            console.log('Filtered tops:', tops);
            console.log('Filtered bottoms:', bottoms);
            console.log('Filtered shoes:', shoes);
            console.log('Filtered hats:', hats);
            console.log('Filtered bags:', bags);
            console.log('Filtered accessories:', accessories);
            console.log('Filtered jackets:', jackets);

            const selectedTop = tops[Math.floor(Math.random() * tops.length)];
            const selectedJacket = jackets[Math.floor(Math.random() * jackets.length)];
            const selectedBottom = bottoms[Math.floor(Math.random() * bottoms.length)];
            const selectedShoes = shoes[Math.floor(Math.random() * shoes.length)];
            const selectedHat = hats[Math.floor(Math.random() * hats.length)];
            const selectedBag = bags[Math.floor(Math.random() * bags.length)];
            const selectedAccessory = accessories[Math.floor(Math.random() * accessories.length)];

            if (selectedTop) {
                const topImg = document.createElement('img');
                topImg.src = selectedTop.image_url;
                topImg.alt = selectedTop.name;
                topImg.className = 'top';
                outfitDisplay.appendChild(topImg);
            }

            if (selectedJacket) {
                const jacketImg = document.createElement('img');
                jacketImg.src = selectedJacket.image_url;
                jacketImg.alt = selectedJacket.name;
                jacketImg.className = 'jacket';
                outfitDisplay.appendChild(jacketImg);
            }

            if (selectedBottom) {
                const bottomImg = document.createElement('img');
                bottomImg.src = selectedBottom.image_url;
                bottomImg.alt = selectedBottom.name;
                bottomImg.className = 'bottom';
                outfitDisplay.appendChild(bottomImg);
            }

            if (selectedShoes) {
                const shoesImg = document.createElement('img');
                shoesImg.src = selectedShoes.image_url;
                shoesImg.alt = selectedShoes.name;
                shoesImg.className = 'shoes';
                outfitDisplay.appendChild(shoesImg);
            }

            if (selectedHat) {
                const hatImg = document.createElement('img');
                hatImg.src = selectedHat.image_url;
                hatImg.alt = selectedHat.name;
                hatImg.className = 'hat';
                outfitDisplay.appendChild(hatImg);
            }

            if (selectedBag) {
                const bagDiv = document.createElement('div');
                bagDiv.className = 'bag-display';
                const bagImg = document.createElement('img');
                bagImg.src = selectedBag.image_url;
                bagImg.alt = selectedBag.name;
                bagDiv.appendChild(bagImg);
                outfitDisplay.appendChild(bagDiv);
            }

            if (selectedAccessory) {
                const accessoryImg = document.createElement('img');
                accessoryImg.src = selectedAccessory.image_url;
                accessoryImg.alt = selectedAccessory.name;
                accessoryImg.className = 'accessory';
                outfitDisplay.appendChild(accessoryImg);
            }
        }
    </script>
</body>
</html>
